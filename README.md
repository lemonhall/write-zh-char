# æ±‰å­—æçº¢ç»ƒä¹ åº”ç”¨

è¿™æ˜¯ä¸€ä¸ªäº¤äº’å¼æ±‰å­—æçº¢ç»ƒä¹ åº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·å­¦ä¹ æ±‰å­—ä¹¦å†™ã€‚åº”ç”¨æä¾›é™æ€æçº¢ã€åŠ¨æ€æçº¢å’Œè‡ªä¸»ç»ƒä¹ ä¸‰ç§æ¨¡å¼ï¼Œæ”¯æŒPCå’Œæ‰‹æœºè®¾å¤‡ï¼Œå¹¶æä¾›å³æ—¶åé¦ˆä¸åŠ¨ç”»æ•ˆæœã€‚

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. é™æ€æçº¢
- å±•ç¤ºæ±‰å­—è½®å»“ä¾›ç”¨æˆ·ææ‘¹
- æ”¯æŒå¤šå­—ç»ƒä¹ 
- æ ¹æ®è®¾å¤‡è‡ªåŠ¨è°ƒæ•´æ¨ª/ç«–æ’å¸ƒå±€

### 2. åŠ¨æ€æçº¢
- åŠ¨ç”»å±•ç¤ºæ±‰å­—ç¬”ç”»ä¹¦å†™è¿‡ç¨‹
- é€šè¿‡åŠ¨ç”»æ¸…æ™°å±•ç¤ºç¬”ç”»é¡ºåºå’Œæ–¹å‘
- å®Œæˆåæ˜¾ç¤ºçƒŸèŠ±ç‰¹æ•ˆ

### 3. è‡ªä¸»ç»ƒä¹ 
- ç”¨æˆ·ä¸»åŠ¨ä¹¦å†™æ±‰å­—
- ç¬”ç”»æ­£ç¡®æ€§å®æ—¶åé¦ˆ
- å®Œæˆåæä¾›æˆåŠŸæç¤ºå’Œç‰¹æ•ˆ

## ğŸ“± è®¾å¤‡å…¼å®¹

- **PCç«¯**ï¼šæ¨ªæ’å¸ƒå±€ï¼Œé€‚åˆå®½å±æ˜¾ç¤º
- **æ‰‹æœºç«¯**ï¼šç«–æ’å¸ƒå±€ï¼Œä¼˜åŒ–è§¦æ‘¸æ“ä½œ

## ğŸ› ï¸ æŠ€æœ¯å®ç°

- ä½¿ç”¨**cnchar**åº“å¤„ç†æ±‰å­—æ•°æ®å’Œä¹¦å†™åŠŸèƒ½
- çº¯å‰ç«¯JavaScriptå®ç°ï¼Œæ— åç«¯ä¾èµ–
- æœ¬åœ°å­˜å‚¨æ±‰å­—ç¬”ç”»æ•°æ®ï¼Œé¿å…ç½‘ç»œè¯·æ±‚
- æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºæ‰©å±•æ–°åŠŸèƒ½
- ä½¿ç”¨**Tauri**æ¡†æ¶æ‰“åŒ…ä¸ºæ¡Œé¢åº”ç”¨ï¼Œæ”¯æŒWindowsã€macOSå’ŒLinux

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
write-zh-char/
â”œâ”€â”€ js/                  # JavaScriptæ¨¡å—
â”‚   â”œâ”€â”€ config.js        # åŸºç¡€é…ç½®å’Œé€šç”¨å‡½æ•°
â”‚   â”œâ”€â”€ core.js          # æ ¸å¿ƒç»˜å›¾åŠŸèƒ½
â”‚   â”œâ”€â”€ effects.js       # ç‰¹æ•ˆå’ŒéŸ³æ•ˆ
â”‚   â”œâ”€â”€ static-draw.js   # é™æ€æçº¢åŠŸèƒ½
â”‚   â”œâ”€â”€ animate-draw.js  # åŠ¨æ€æçº¢åŠŸèƒ½
â”‚   â”œâ”€â”€ test-draw.js     # è‡ªä¸»ç»ƒä¹ åŠŸèƒ½
â”‚   â””â”€â”€ main.js          # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ css/                 # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ styles.css       # ä¸»æ ·å¼è¡¨
â”œâ”€â”€ data/                # æœ¬åœ°æ•°æ®
â”‚   â””â”€â”€ dict/            # æ±‰å­—ç¬”ç”»æ•°æ®JSONæ–‡ä»¶
â”œâ”€â”€ sounds/              # éŸ³æ•ˆæ–‡ä»¶
â”œâ”€â”€ dist/                # æ‰“åŒ…è¾“å‡ºç›®å½•ï¼Œç”¨äºTauriæ„å»º
â”œâ”€â”€ src-tauri/           # Tauriç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ src/             # Rustæºä»£ç 
â”‚   â”œâ”€â”€ Cargo.toml       # Rustä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ tauri.conf.json  # Taurié…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ icons/           # åº”ç”¨å›¾æ ‡
â”œâ”€â”€ cnchar.all.min.js    # cncharæ ¸å¿ƒåº“
â”œâ”€â”€ draw-chinese-congrats.html  # ä¸»é¡µé¢
â”œâ”€â”€ package.json         # é¡¹ç›®ä¾èµ–é…ç½®
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å®‰è£…ä¸ä½¿ç”¨

### å‰ææ¡ä»¶
- Node.js (æ¨èv14æˆ–æ›´é«˜ç‰ˆæœ¬)
- npmæˆ–yarnåŒ…ç®¡ç†å™¨
- ç°ä»£æµè§ˆå™¨ (Chrome, Firefox, Safari, Edgeç­‰)

### Webç‰ˆæœ¬å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone <ä»“åº“åœ°å€>
   cd write-zh-char
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **å¤åˆ¶æ±‰å­—æ•°æ®æ–‡ä»¶**
   ```bash
   # åˆ›å»ºæ•°æ®ç›®å½•
   mkdir -p data/dict

   # å¤åˆ¶æ±‰å­—æ•°æ®æ–‡ä»¶
   cp -r node_modules/cnchar-data/draw/*.json data/dict/
   ```
   > æ³¨æ„ï¼šWindowsç³»ç»Ÿä¸‹è¯·ä½¿ç”¨`xcopy`å‘½ä»¤ï¼š`xcopy node_modules\cnchar-data\draw\*.json data\dict\ /Y`

4. **å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨**
   ```bash
   # å¦‚æœå®‰è£…äº†http-server
   http-server
   
   # æˆ–è€…ä½¿ç”¨Pythonå†…ç½®çš„HTTPæœåŠ¡å™¨
   python -m http.server
   ```

5. **è®¿é—®åº”ç”¨**
   - æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8000/draw-chinese-congrats.html`

### Tauriæ¡Œé¢åº”ç”¨å¼€å‘

#### å‰ææ¡ä»¶
Tauriè¦æ±‚å®‰è£…ç‰¹å®šçš„ç³»ç»Ÿä¾èµ–ï¼Œè¯·æ ¹æ®ä¸åŒæ“ä½œç³»ç»Ÿå®‰è£…å¿…è¦ç»„ä»¶ï¼š

- **Windows**ï¼š
  - [Microsoft Visual C++ Build Tools](https://visualstudio.microsoft.com/visual-cpp-build-tools/)
  - [WebView2](https://developer.microsoft.com/en-us/microsoft-edge/webview2/)
  - [Rust](https://www.rust-lang.org/tools/install)

- **macOS**ï¼š
  ```bash
  xcode-select --install
  brew install rustup
  rustup-init
  ```

- **Linux**ï¼š
  ```bash
  # Ubuntuç¤ºä¾‹
  sudo apt update
  sudo apt install libwebkit2gtk-4.0-dev build-essential curl libssl-dev libgtk-3-dev libayatana-appindicator3-dev librsvg2-dev
  curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
  ```

#### å¼€å‘æµç¨‹

1. **å‡†å¤‡æ„å»ºç¯å¢ƒ**
   ```bash
   # ç¡®ä¿ä¾èµ–å·²å®‰è£…
   npm install
   
   # å‡†å¤‡distç›®å½•
   mkdir -p dist/data/dict dist/sounds dist/js dist/css
   cp -r data/dict/* dist/data/dict/
   cp -r sounds/* dist/sounds/
   cp -r js/* dist/js/
   cp -r css/* dist/css/
   cp cnchar.all.min.js dist/
   cp draw-chinese-congrats.html dist/index.html
   ```

2. **å¼€å‘æ¨¡å¼è¿è¡ŒTauriåº”ç”¨**
   ```bash
   npm run tauri dev
   ```
   è¿™å°†å¯åŠ¨ä¸€ä¸ªå¼€å‘æ¨¡å¼çš„æ¡Œé¢åº”ç”¨ï¼Œå¯ä»¥å®æ—¶æµ‹è¯•å’Œè°ƒè¯•ã€‚

3. **æ„å»ºæ¡Œé¢åº”ç”¨**
   ```bash
   npm run tauri build
   ```
   ç”Ÿæˆçš„å®‰è£…ç¨‹åºå°†ä½äº `src-tauri/target/release/bundle` ç›®å½•ã€‚

4. **ä»…ä½¿ç”¨å¯æ‰§è¡Œæ–‡ä»¶**
   æ„å»ºå®Œæˆåï¼Œå¯ä»¥åœ¨ `src-tauri/target/release/` ç›®å½•æ‰¾åˆ°ç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼Œæ— éœ€å®‰è£…ã€‚

## ğŸ“‹ Taurié…ç½®è¯´æ˜

Taurié…ç½®æ–‡ä»¶ä½äº `src-tauri/tauri.conf.json`ï¼ŒåŒ…å«ä»¥ä¸‹é‡è¦é…ç½®ï¼š

### åº”ç”¨ä¿¡æ¯é…ç½®
```json
{
  "productName": "HanziWriter",  // åº”ç”¨åç§°
  "version": "1.0.0",           // åº”ç”¨ç‰ˆæœ¬
  "identifier": "com.hanzi.writer"  // åº”ç”¨æ ‡è¯†ç¬¦
}
```

### çª—å£é…ç½®
```json
"windows": [
  {
    "title": "æ±‰å­—æçº¢ç»ƒä¹ ",  // çª—å£æ ‡é¢˜
    "width": 1024,         // çª—å£å®½åº¦
    "height": 768,         // çª—å£é«˜åº¦
    "resizable": true,     // æ˜¯å¦å¯è°ƒæ•´å¤§å°
    "fullscreen": false,   // æ˜¯å¦å…¨å±
    "center": true         // æ˜¯å¦å±…ä¸­æ˜¾ç¤º
  }
]
```

### æ‰“åŒ…é…ç½®
```json
"bundle": {
  "active": true,
  "targets": ["nsis"],  // æ‰“åŒ…æ ¼å¼ï¼Œå¦‚nsis(å®‰è£…åŒ…)ã€msiç­‰
  "icon": [            // åº”ç”¨å›¾æ ‡
    "icons/32x32.png",
    "icons/128x128.png",
    "icons/icon.ico"
  ],
  "resources": [      // éœ€è¦æ‰“åŒ…çš„èµ„æºæ–‡ä»¶
    "../dist/data/**/*.json",
    "../dist/sounds/*"
  ]
}
```

### èµ„æºåŠ è½½æœºåˆ¶

åœ¨Tauriåº”ç”¨ä¸­ï¼Œèµ„æºæ–‡ä»¶çš„åŠ è½½è·¯å¾„ä¸æ™®é€šWebåº”ç”¨ä¸åŒï¼š

```javascript
// åœ¨æµè§ˆå™¨ç¯å¢ƒï¼š
let dataPath = './data/dict/';

// åœ¨Tauriç¯å¢ƒï¼š
if (window.tauriApi && window.tauriApi.isTauri) {
  dataPath = await window.tauriApi.getResourcePath('data/dict/');
}
```

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

- **ä¿®æ”¹æ ·å¼**ï¼šç¼–è¾‘`css/styles.css`æ–‡ä»¶
- **è°ƒæ•´åŠ¨ç”»é€Ÿåº¦**ï¼šåœ¨`js/animate-draw.js`ä¸­ä¿®æ”¹ç›¸å…³å‚æ•°
- **å¢åŠ æ–°åŠŸèƒ½**ï¼šå¯åœ¨`js/`ç›®å½•ä¸‹åˆ›å»ºæ–°æ¨¡å—ï¼Œå¹¶åœ¨`main.js`ä¸­å¼•å…¥
- **è‡ªå®šä¹‰Taurié…ç½®**ï¼šç¼–è¾‘`src-tauri/tauri.conf.json`æ–‡ä»¶

## ğŸ“˜ æ±‰å­—æ•°æ®è¯´æ˜

åº”ç”¨ä½¿ç”¨`cnchar-data`åŒ…ä¸­çš„æ±‰å­—ç¬”ç”»æ•°æ®ï¼ŒåŒ…å«çº¦9500ä¸ªå¸¸ç”¨æ±‰å­—ï¼Œæ¯ä¸ªæ±‰å­—å¯¹åº”ä¸€ä¸ªJSONæ–‡ä»¶ï¼Œå­˜å‚¨äº`data/dict/`ç›®å½•ã€‚

æ¯ä¸ªJSONæ–‡ä»¶åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
- æ±‰å­—ç¼–ç 
- ç¬”ç”»æ•°é‡
- æ¯ä¸ªç¬”ç”»çš„åæ ‡ç‚¹
- ç¬”ç”»ç±»å‹ï¼ˆæ¨ªã€ç«–ã€æ’‡ã€æºç­‰ï¼‰

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼Œæäº¤é—®é¢˜æˆ–å»ºè®®ï¼š

1. Forké¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

- PC/æ‰‹æœºä½¿ç”¨ä¸åŒçš„å¸ƒå±€æ–¹å¼ï¼Œé€šè¿‡`isDevicePC()`å‡½æ•°åˆ¤æ–­
- æ·»åŠ æ–°åŠŸèƒ½æ—¶å»ºè®®åˆ›å»ºç‹¬ç«‹æ¨¡å—å¹¶æŒ‰ä¾èµ–é¡ºåºå¼•å…¥
- æœ¬åœ°data/dictç›®å½•å­˜å‚¨æ±‰å­—æ•°æ®ï¼Œé¿å…ç½‘ç»œè¯·æ±‚å’ŒCORSé—®é¢˜
- Tauriåº”ç”¨ä¸­çš„è·¯å¾„å¤„ç†ä¸Webåº”ç”¨ä¸åŒï¼Œéœ€ä½¿ç”¨`window.tauriApi.getResourcePath`è·å–èµ„æºè·¯å¾„
- å¼€å‘æœŸé—´å»ºè®®åŒæ—¶æµ‹è¯•Webç‰ˆæœ¬å’ŒTauriç‰ˆæœ¬ï¼Œç¡®ä¿å…¼å®¹æ€§

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- ç”µå­é‚®ä»¶ï¼š[your-email@example.com]
- GitHub Issuesï¼š[é¡¹ç›®Issuesé¡µé¢]
